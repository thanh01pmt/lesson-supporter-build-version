import{Q as u}from"./QSelect.70047d12.js";import{Q as z,a as P,b as v}from"./QItem.a6e550b6.js";import{o as A,r as c,k as r,X as N,a9 as M,q as n,Z as i,a7 as d,ce as j,cf as E,a0 as V,a1 as _,bs as y,a6 as p,ad as G,ae as K,af as R,ag as X,L as I,ac as Z}from"./index.037f850d.js";import{Q as H}from"./QForm.e3b755fa.js";import{C as b}from"./ClosePopup.f7b4fda5.js";import{a as J}from"./quizStore.de5eab0d.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";const $={name:"TestFilter",emits:["start-quiz"],setup(O,{emit:t}){const a=J();A(async()=>{await a.initializeStore()});const e=c({studentId:"",name:"",batch:""}),s=c({company:"",course:"",level:"",dayOfWeek:"",startTime:"",endTime:""}),m=c(null),l=c([]),S=r(()=>a.courseOptions),h=r(()=>a.levelOptions),F=r(()=>a.companyOptions),C=r(()=>a.dayOfWeekOptions),g=r(()=>a.timeOptions),T=o=>{s.value.course=o,a.updateFilter("course",o)},k=o=>{s.value.level=o,a.updateFilter("level",o)},Q=o=>{s.value.company=o,a.updateFilter("company",o)},U=o=>{s.value.dayOfWeek=o,a.updateFilter("dayOfWeek",o)},w=o=>{s.value.startTime=o,a.updateFilter("startTime",o)},x=(o,B)=>{a.filterStudents(o),B(()=>{l.value=a.filteredStudents})},D=o=>{!o||(a.selectStudent(o),e.value={studentId:o.id,name:o.name,batch:o.batch})},f=c(!1),W=()=>{f.value=!0},L=()=>{const o=a.selectedStudent;t("start-quiz",{studentInfo:e.value,classInfo:{...s.value,endTime:o.endTime,courseCode:a.currentCourseCode,levelIndex:a.currentLevelIndex,fullLevelCode:a.currentFullLevelCode,fullCode:a.currentFullCode}})},q=r(()=>m.value!==null&&s.value.company&&s.value.course&&s.value.level&&s.value.dayOfWeek&&s.value.startTime);return{studentInfo:e,classInfo:s,selectedStudent:m,studentOptions:l,companyOptions:F,courseOptions:S,levelOptions:h,dayOfWeekOptions:C,timeOptions:g,filterStudents:x,updateStudentInfo:D,updateCourseFilter:T,updateLevelFilter:k,updateCompanyFilter:Q,updateDayFilter:U,updateTimeFilter:w,isFormValid:q,onSubmit:W,showConfirmDialog:f,confirmStart:L}}},ee={class:"student-test-form"},le={class:"row q-col-gutter-md"},oe={class:"col-12 col-md-6"},te={class:"col-12 col-md-6"},ne={class:"col-12 col-md-6"},ae={class:"col-12 col-md-6"},se={class:"col-12 col-md-6"},de={class:"row q-col-gutter-md"},ie={class:"col-12"},ue={class:"col-12"},re={class:"col-12"},ce={class:"row justify-end"};function me(O,t,a,e,s,m){return N(),M("div",ee,[n(H,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:i(()=>[d("div",le,[d("div",oe,[n(u,{modelValue:e.classInfo.course,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.classInfo.course=l),e.updateCourseFilter],options:e.courseOptions,label:"Kh\xF3a h\u1ECDc",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn kh\xF3a h\u1ECDc"],outlined:"",dense:""},null,8,["modelValue","options","rules","onUpdate:modelValue"])]),d("div",te,[n(u,{modelValue:e.classInfo.level,"onUpdate:modelValue":[t[1]||(t[1]=l=>e.classInfo.level=l),e.updateLevelFilter],options:e.levelOptions,label:"Level",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn level"],outlined:"",dense:""},null,8,["modelValue","options","rules","onUpdate:modelValue"])]),d("div",ne,[n(u,{modelValue:e.classInfo.company,"onUpdate:modelValue":[t[2]||(t[2]=l=>e.classInfo.company=l),e.updateCompanyFilter],options:e.companyOptions,label:"C\u01A1 s\u1EDF",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn c\u01A1 s\u1EDF"],outlined:"",dense:""},null,8,["modelValue","options","rules","onUpdate:modelValue"])]),d("div",ae,[n(u,{modelValue:e.classInfo.dayOfWeek,"onUpdate:modelValue":[t[3]||(t[3]=l=>e.classInfo.dayOfWeek=l),e.updateDayFilter],options:e.dayOfWeekOptions,label:"Th\u1EE9",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn th\u1EE9"],outlined:"",dense:""},null,8,["modelValue","options","rules","onUpdate:modelValue"])]),d("div",se,[n(u,{modelValue:e.classInfo.startTime,"onUpdate:modelValue":[t[4]||(t[4]=l=>e.classInfo.startTime=l),e.updateTimeFilter],options:e.timeOptions,label:"Gi\u1EDD h\u1ECDc",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn gi\u1EDD h\u1ECDc"],outlined:"",dense:""},null,8,["modelValue","options","rules","onUpdate:modelValue"])])]),d("div",de,[d("div",ie,[n(u,{modelValue:e.selectedStudent,"onUpdate:modelValue":[t[5]||(t[5]=l=>e.selectedStudent=l),e.updateStudentInfo],options:e.studentOptions,label:"T\xEAn h\u1ECDc vi\xEAn","option-label":"name",rules:[l=>!!l||"Vui l\xF2ng ch\u1ECDn h\u1ECDc vi\xEAn"],"use-input":"","input-debounce":"0",onFilter:e.filterStudents},{option:i(l=>[n(z,j(E(l.itemProps)),{default:i(()=>[n(P,null,{default:i(()=>[n(v,null,{default:i(()=>[V(_(l.opt.name),1)]),_:2},1024),n(v,{caption:""},{default:i(()=>[V(_(l.opt.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","rules","onFilter","onUpdate:modelValue"])]),d("div",ue,[n(y,{modelValue:e.studentInfo.studentId,"onUpdate:modelValue":t[6]||(t[6]=l=>e.studentInfo.studentId=l),label:"M\xE3 h\u1ECDc vi\xEAn",readonly:"",outlined:"",dense:""},null,8,["modelValue"])]),d("div",re,[n(y,{modelValue:e.studentInfo.batch,"onUpdate:modelValue":t[7]||(t[7]=l=>e.studentInfo.batch=l),label:"Batch",readonly:"",outlined:"",dense:""},null,8,["modelValue"])])]),d("div",ce,[n(p,{label:"B\u1EAFt \u0111\u1EA7u",type:"submit",color:"primary",disable:!e.isFormValid},null,8,["disable"])])]),_:1},8,["onSubmit"]),n(Z,{modelValue:e.showConfirmDialog,"onUpdate:modelValue":t[8]||(t[8]=l=>e.showConfirmDialog=l),persistent:""},{default:i(()=>[n(G,null,{default:i(()=>[n(K,{class:"row items-center"},{default:i(()=>[n(R,{icon:"help_outline",color:"primary","text-color":"white"}),t[9]||(t[9]=d("span",{class:"q-ml-sm"},"B\u1EA1n \u0111\xE3 s\u1EB5n s\xE0ng l\xE0m b\xE0i ki\u1EC3m tra?",-1))]),_:1}),n(X,{align:"right"},{default:i(()=>[I(n(p,{flat:"",label:"Ch\u01B0a",color:"negative"},null,512),[[b]]),I(n(p,{flat:"",label:"S\u1EB5n s\xE0ng",color:"primary",onClick:e.confirmStart},null,8,["onClick"]),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var be=Y($,[["render",me],["__scopeId","data-v-63ed1fe2"]]);export{be as T};
