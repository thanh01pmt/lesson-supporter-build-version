import{u as B}from"./use-quasar.414eeb3f.js";import{u as O,a as L}from"./quizStore.de5eab0d.js";import{r as d,k as z,w as V,X as T,a9 as I,q as s,Z as y,a7 as o,bs as w,a6 as K,ad as A,ae as P,af as G,ag as F,ac as W,bu as U,aF as x,o as R,a4 as h,Y as M,$ as k,a1 as q,F as j,aa as X}from"./index.037f850d.js";import{G as Z}from"./GeneralQuestion.6755875f.js";import{Q as J,T as $,B as ee}from"./BackToTopQuiz.9a05dbf2.js";import{Q as f}from"./QSelect.70047d12.js";import{Q as le}from"./QForm.e3b755fa.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Y}from"./QuizOverview.a2be5ae6.js";import"./QBanner.958da182.js";import"./CustomImage.fa404383.js";import"./QSpinnerDots.6c974946.js";import"./QImg.c60a9877.js";import"./QItem.a6e550b6.js";import"./QList.80fe3cd0.js";import"./NumericQuestion.d7b59b0a.js";import"./rtl.ad3ba425.js";import"./QLinearProgress.f467e272.js";import"./format.8ac60962.js";import"./QExpansionItem.da0e08ff.js";import"./QTooltip.9f64b4d0.js";import"./selection.b5503321.js";import"./QPageSticky.881935b1.js";import"./ClosePopup.f7b4fda5.js";const ne={name:"TestFilter",emits:["start-quiz"],setup(g,{emit:l}){const c=d({name:""}),e=d(""),a=d({company:"",course:"",level:"",dayOfWeek:"",startTime:"",endTime:""}),u=[{label:"Kh\xE1m ph\xE1 robotic AI",value:"Kh\xE1m ph\xE1 robotic AI"},{label:"Si\xEAu nh\xE2n l\xE0m Game",value:"Si\xEAu nh\xE2n l\xE0m Game"},{label:"Si\xEAu nh\xE2n L\u1EADp tr\xECnh Web",value:"Si\xEAu nh\xE2n L\u1EADp tr\xECnh Web"},{label:"M\u1EA7m non c\xF4ng ngh\u1EC7",value:"M\u1EA7m non c\xF4ng ngh\u1EC7"},{label:"B\xE9 l\xE0m Game",value:"B\xE9 l\xE0m Game"},{label:"Si\xEAu nh\xE2n l\u1EADp tr\xECnh",value:"Si\xEAu nh\xE2n l\u1EADp tr\xECnh"},{label:"Th\u1EBF gi\u1EDBi v\u1EA1n v\u1EADt th\xF4ng minh",value:"Th\u1EBF gi\u1EDBi v\u1EA1n v\u1EADt th\xF4ng minh"},{label:"Kh\xE1m ph\xE1 Robotics",value:"Kh\xE1m ph\xE1 Robotics"},{label:"Digi Style: MultiMedia",value:"Digi Style: MultiMedia"},{label:"Kh\xE1m ph\xE1 robotic Spike",value:"Kh\xE1m ph\xE1 robotic Spike"},{label:"Digi: STEAM Art",value:"Digi: STEAM Art"},{label:"L\u1EADp tr\xECnh Web v\u1EDBi Django",value:"L\u1EADp tr\xECnh Web v\u1EDBi Django"},{label:"L\u1EADp tr\xECnh App v\u1EDBi Swift",value:"L\u1EADp tr\xECnh App v\u1EDBi Swift"},{label:"L\u1EADp tr\xECnh Game 3D & Metaverse",value:"L\u1EADp tr\xECnh Game 3D & Metaverse"},{label:"C\xF4ng ngh\u1EC7 l\u1EADp tr\xECnh IoT",value:"C\xF4ng ngh\u1EC7 l\u1EADp tr\xECnh IoT"},{label:"Thi\u1EBFt k\u1EBF - Truy\u1EC1n Th\xF4ng",value:"Thi\u1EBFt k\u1EBF Truy\u1EC1n Th\xF4ng"}],n=[{label:"H\u1ECDc ph\u1EA7n 1",value:"HP01"},{label:"H\u1ECDc ph\u1EA7n 2",value:"HP02"},{label:"H\u1ECDc ph\u1EA7n 3",value:"HP03"},{label:"H\u1ECDc ph\u1EA7n 4",value:"HP04"},{label:"H\u1ECDc ph\u1EA7n 5",value:"HP05"},{label:"H\u1ECDc ph\u1EA7n 6",value:"HP06"},{label:"H\u1ECDc ph\u1EA7n 7",value:"HP07"},{label:"H\u1ECDc ph\u1EA7n 8",value:"HP08"},{label:"H\u1ECDc ph\u1EA7n 9",value:"HP09"},{label:"H\u1ECDc ph\u1EA7n 10",value:"HP10"},{label:"H\u1ECDc ph\u1EA7n 11",value:"HP11"},{label:"H\u1ECDc ph\u1EA7n 12",value:"HP12"}],Q=[{label:"0. Teky Holdings",value:"0. Teky Holdings"},{label:"1. TEKY C\u1EA7u Gi\u1EA5y - HN",value:"1. TEKY C\u1EA7u Gi\u1EA5y - HN"},{label:"2. TEKY Qu\u1EADn 3 - HCM",value:"2. TEKY Qu\u1EADn 3 - HCM"},{label:"3. TEKY T\xE2n B\xECnh - HCM",value:"3. TEKY T\xE2n B\xECnh - HCM"},{label:"4. TEKY H\xE0 \u0110\xF4ng - HN",value:"4. TEKY H\xE0 \u0110\xF4ng - HN"},{label:"5. TEKY Qu\u1EADn 7 Him Lam - HCM",value:"5. TEKY Qu\u1EADn 7 Him Lam - HCM"},{label:"6. TEKY G\xF2 V\u1EA5p - HCM",value:"6. TEKY G\xF2 V\u1EA5p - HCM"},{label:"7. TEKY B\xECnh Th\u1EA1nh - HCM",value:"7. TEKY B\xECnh Th\u1EA1nh - HCM"},{label:"8. TEKY Ho\xE0n Ki\u1EBFm - HN",value:"8. TEKY Ho\xE0n Ki\u1EBFm - HN"},{label:"9. Teky Long Bi\xEAn - HN",value:"9. Teky Long Bi\xEAn - HN"},{label:"10. TEKY Nam T\u1EEB Li\xEAm - HN",value:"10. TEKY Nam T\u1EEB Li\xEAm - HN"},{label:"11. TEKY Ng\xF4 Quy\u1EC1n - HP",value:"11. TEKY Ng\xF4 Quy\u1EC1n - HP"},{label:"12. TEKY B\xECnh T\xE2n - HCM",value:"12. TEKY B\xECnh T\xE2n - HCM"},{label:"13. TEKY Ph\xFA Nhu\u1EADn - HCM",value:"13. TEKY Ph\xFA Nhu\u1EADn - HCM"},{label:"14. TEKY Qu\u1EADn 2 - HCM",value:"14. TEKY Qu\u1EADn 2 - HCM"},{label:"15. TEKY Th\u1EE7 D\u1EA7u M\u1ED9t - BD",value:"15. TEKY Th\u1EE7 D\u1EA7u M\u1ED9t - BD"},{label:"16. TEKY H\u1EA1 Long - QN",value:"16. TEKY H\u1EA1 Long - QN"},{label:"17. TEKY T\xE2n Ph\xFA - HCM",value:"17. TEKY T\xE2n Ph\xFA - HCM"},{label:"18. TEKY Qu\u1EADn 11 - HCM",value:"18. TEKY Qu\u1EADn 11 - HCM"},{label:"20. TEKY Hai B\xE0 Tr\u01B0ng - HN",value:"20. TEKY Hai B\xE0 Tr\u01B0ng - HN"},{label:"21. TEKY Ho\xE0ng Mai - HN",value:"21. TEKY Ho\xE0ng Mai - HN"},{label:"22. TEKY - B\u1EAFc T\u1EEB Li\xEAm - HN",value:"22. TEKY - B\u1EAFc T\u1EEB Li\xEAm - HN"},{label:"Teky Edtech",value:"Teky Edtech"}],v=[{label:"Th\u1EE9 2",value:"Th\u1EE9 2"},{label:"Th\u1EE9 3",value:"Th\u1EE9 3"},{label:"Th\u1EE9 4",value:"Th\u1EE9 4"},{label:"Th\u1EE9 5",value:"Th\u1EE9 5"},{label:"Th\u1EE9 6",value:"Th\u1EE9 6"},{label:"Th\u1EE9 7",value:"Th\u1EE9 7"},{label:"Ch\u1EE7 nh\u1EADt",value:"Ch\u1EE7 nh\u1EADt"}],_=[{label:"08:00",value:"08:00"},{label:"08:30",value:"08:30"},{label:"10:00",value:"10:00"},{label:"12:00",value:"12:00"},{label:"14:00",value:"14:00"},{label:"16:00",value:"16:00"},{label:"18:00",value:"18:00"},{label:"19:00",value:"19:00"}],b=[{label:"09:30",value:"09:30"},{label:"10:00",value:"10:00"},{label:"11:30",value:"11:30"},{label:"12:00",value:"12:00"},{label:"16:00",value:"16:00"},{label:"17:30",value:"17:30"},{label:"18:00",value:"18:00"},{label:"19:30",value:"19:30"},{label:"20:00",value:"20:00"},{label:"20:30",value:"20:30"},{label:"21:00",value:"21:00"}],m=d([]),p=d(!1),r=()=>{p.value=!0},C=()=>{l("start-quiz",{studentInfo:{name:c.value.name},classInfo:{company:a.value.company.value,course:a.value.course.value,level:a.value.level.value,dayOfWeek:a.value.dayOfWeek.value,startTime:a.value.startTime.value,endTime:a.value.endTime.value},quizId:e.value})},H=z(()=>c.value.name&&a.value.company&&a.value.course&&a.value.level&&a.value.dayOfWeek&&a.value.startTime&&a.value.endTime),S=t=>{if(typeof t!="string"||t.trim()==="")return 0;const[i,E]=t.split(":").map(Number);return i*60+E};return V(()=>a.value.startTime,t=>{if(console.log(t),t){const i=S(t.value);m.value=b.filter(E=>{const N=S(E.value)-i;return N>=90&&N<=120})}else m.value=[]}),V(m,t=>{a.value.endTime&&!t.some(i=>i.value===a.value.endTime)&&(a.value.endTime="")}),{quizId:e,studentInfo:c,classInfo:a,courseOptions:u,levelOptions:n,companyOptions:Q,dayOfWeekOptions:v,startTimeOptions:_,endTimeOptions:b,filteredEndTimeOptions:m,isFormValid:H,onSubmit:r,showConfirmDialog:p,confirmStart:C,timeToMinutes:S}}},te={class:"student-test-form"},ae={class:"row q-col-gutter-md"},oe={class:"col-12 col-md-6"},se={class:"col-12 col-md-6"},ie={class:"col-12 col-md-6"},ue={class:"col-12 col-md-6"},re={class:"col-12 col-md-6"},de={class:"col-12 col-md-6"},me={class:"row q-col-gutter-md"},ce={class:"col-12"},ve={class:"row q-col-gutter-md"},he={class:"col-12"},Te={class:"row justify-end"};function be(g,l,c,e,a,u){return T(),I("div",te,[s(le,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:y(()=>[o("div",ae,[o("div",oe,[s(f,{modelValue:e.classInfo.course,"onUpdate:modelValue":l[0]||(l[0]=n=>e.classInfo.course=n),options:e.courseOptions,label:"Kh\xF3a h\u1ECDc",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn kh\xF3a h\u1ECDc"],outlined:"",dense:""},null,8,["modelValue","options","rules"])]),o("div",se,[s(f,{modelValue:e.classInfo.level,"onUpdate:modelValue":l[1]||(l[1]=n=>e.classInfo.level=n),options:e.levelOptions,label:"Level",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn level"],outlined:"",dense:""},null,8,["modelValue","options","rules"])]),o("div",ie,[s(f,{modelValue:e.classInfo.company,"onUpdate:modelValue":l[2]||(l[2]=n=>e.classInfo.company=n),options:e.companyOptions,label:"C\u01A1 s\u1EDF",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn c\u01A1 s\u1EDF"],outlined:"",dense:""},null,8,["modelValue","options","rules"])]),o("div",ue,[s(f,{modelValue:e.classInfo.dayOfWeek,"onUpdate:modelValue":l[3]||(l[3]=n=>e.classInfo.dayOfWeek=n),options:e.dayOfWeekOptions,label:"Th\u1EE9",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn th\u1EE9"],outlined:"",dense:""},null,8,["modelValue","options","rules"])]),o("div",re,[s(f,{modelValue:e.classInfo.startTime,"onUpdate:modelValue":l[4]||(l[4]=n=>e.classInfo.startTime=n),options:e.startTimeOptions,label:"Gi\u1EDD b\u1EAFt \u0111\u1EA7u",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn gi\u1EDD b\u1EAFt \u0111\u1EA7u"],outlined:"",dense:""},null,8,["modelValue","options","rules"])]),o("div",de,[s(f,{modelValue:e.classInfo.endTime,"onUpdate:modelValue":l[5]||(l[5]=n=>e.classInfo.endTime=n),options:e.filteredEndTimeOptions,label:"Gi\u1EDD k\u1EBFt th\xFAc",rules:[n=>!!n||"Vui l\xF2ng ch\u1ECDn gi\u1EDD k\u1EBFt th\xFAc"],outlined:"",dense:""},null,8,["modelValue","options","rules"])])]),o("div",me,[o("div",ce,[s(w,{modelValue:e.studentInfo.name,"onUpdate:modelValue":l[6]||(l[6]=n=>e.studentInfo.name=n),label:"T\xEAn h\u1ECDc vi\xEAn",rules:[n=>!!n||"Vui l\xF2ng nh\u1EADp t\xEAn h\u1ECDc vi\xEAn"],outlined:"",dense:""},null,8,["modelValue","rules"])])]),o("div",ve,[o("div",he,[s(w,{modelValue:e.quizId,"onUpdate:modelValue":l[7]||(l[7]=n=>e.quizId=n),label:"M\xE3 \u0111\u1EC1",rules:[n=>!!n||"Vui l\xF2ng nh\u1EADp m\xE3 \u0111\u1EC1"],outlined:"",dense:""},null,8,["modelValue","rules"])])]),o("div",Te,[s(K,{label:"B\u1EAFt \u0111\u1EA7u",type:"submit",color:"primary",disable:!e.isFormValid},null,8,["disable"])])]),_:1},8,["onSubmit"]),s(W,{modelValue:e.showConfirmDialog,"onUpdate:modelValue":l[9]||(l[9]=n=>e.showConfirmDialog=n),persistent:""},{default:y(()=>[s(A,null,{default:y(()=>[s(P,{class:"row items-center"},{default:y(()=>[s(G,{icon:"help_outline",color:"primary","text-color":"white"}),l[10]||(l[10]=o("span",{class:"q-ml-sm"},"B\u1EA1n \u0111\xE3 s\u1EB5n s\xE0ng l\xE0m b\xE0i ki\u1EC3m tra?",-1))]),_:1}),s(F,{align:"right"},{default:y(()=>[s(K,{flat:"",label:"Ch\u01B0a",color:"negative",onClick:l[8]||(l[8]=n=>e.showConfirmDialog=!1)}),s(K,{flat:"",label:"S\u1EB5n s\xE0ng",color:"primary",onClick:e.confirmStart},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var pe=D(ne,[["render",be],["__scopeId","data-v-5a8064fc"]]);const fe={name:"QuizPageNew",components:{GeneralQuestion:Z,QuizResult:J,TestFilter:pe,TestTimer:$,QuizOverview:Y,BackToTopQuiz:ee},setup(){const g=B(),l=O(),c=L(),e=U(),a=d(null),u=d({}),n=d(null),{allQuiz:Q}=x(e),v=z(()=>l.formattedQuiz.length>0?l.formattedQuiz.map((t,i)=>({...t,questionNum:i+1,selectedAnswer:d(null)})):[]),_=async t=>{a.value=t;let i={};i.courseCode=a.value.classInfo.courseCode,i.levelIndex=a.value.classInfo.levelIndex,i.fullLevelCode=a.value.classInfo.fullLevelCode,i.fullQuizCode=`levelQuiz-${a.value.classInfo.fullCode}`,l.updateFilter(i),await l.fetchQuizById(t.quizId),l.isLocalQuiz=!1,l.startQuiz()},b=z(()=>Object.keys(u.value||{}).length),m=z(()=>v.value.length),p=t=>{u.value||(u.value={}),u.value[t.questionNum]=t},r=async()=>{if(H.value.length>0){g.dialog({title:"Ch\u01B0a ho\xE0n th\xE0nh b\xE0i ki\u1EC3m tra",message:`B\u1EA1n ch\u01B0a tr\u1EA3 l\u1EDDi c\xE1c c\xE2u h\u1ECFi s\u1ED1: ${H.value.join(", ")}.
          Vui l\xF2ng ki\u1EC3m tra v\xE0 tr\u1EA3 l\u1EDDi \u0111\u1EA7y \u0111\u1EE7 c\xE1c c\xE2u h\u1ECFi tr\u01B0\u1EDBc khi n\u1ED9p b\xE0i.`,persistent:!0,ok:{label:"\u0110\xE3 hi\u1EC3u",color:"primary"}});return}const t={studentInfo:a.value.studentInfo,classInfo:a.value.classInfo,timestamp:new Date().toISOString(),result:u.value};t.score=l.calculateScore(t.result),t.statistics=l.calculateStatistics(t),t.testId=l.testId,l.updateQuizResult(t),await l.pushTestResultToFirestore()},C=t=>!t.dayOfWeek||!t.startTime||!t.endTime?"":`${t.dayOfWeek} (${t.startTime} - ${t.endTime})`,H=z(()=>v.value.filter(t=>!u.value||u.value[t.questionNum]===null||u.value[t.questionNum]===void 0).map(t=>t.questionNum)),S=t=>{n.value=t;const i=document.getElementById(`question-${t}`);i&&i.scrollIntoView({behavior:"smooth",block:"center"})};return R(async()=>{await Promise.all([l.initializeStore(),c.initializeStore(),e.initializeStore()])}),{formattedQuestions:v,studentData:a,startQuiz:_,handleSubmitQuiz:r,formatSchedule:C,handleAnswer:p,quizStore:l,numAnsweredQuestion:b,numTotalQuestion:m,notAnsweredQuestionList:H,QuizOverview:Y,currentQuestion:n,scrollToQuestion:S,quizResult:u,allQuiz:Q}}},ge={class:"q-pa-xs",ref:"quizResultContent"},Qe={key:1,class:"quiz-content"},_e={class:"questions-container"},He={class:"student-info q-mb-md q-mt-lg"},Se={class:"row q-col-gutter-md"},ye={class:"col-12 col-md-4"},qe={class:"col-12 col-md-8"},ze={class:"quiz-test-wrapper"},Ie={class:"questions-section q-mt-lg"};function Ce(g,l,c,e,a,u){const n=h("TestFilter"),Q=h("QuizOverview"),v=h("TestTimer"),_=h("MultipleChoiceQuestion"),b=h("GeneralQuestion"),m=h("QuizResult"),p=h("BackToTopQuiz");return T(),I("div",ge,[e.quizStore.isTestStart?k("",!0):(T(),M(n,{key:0,onStartQuiz:e.startQuiz},null,8,["onStartQuiz"])),e.quizStore.isTestStart&&!e.quizStore.isTestEnd?(T(),I("div",Qe,[o("div",_e,[o("div",He,[l[0]||(l[0]=o("div",{class:"text-h6"},"Th\xF4ng tin h\u1ECDc vi\xEAn",-1)),o("div",Se,[o("div",ye,[o("div",null,"T\xEAn: "+q(e.studentData.studentInfo.name),1)]),o("div",qe,[o("div",null,"Trung t\xE2m: "+q(e.studentData.classInfo.company),1),o("div",null,"Kh\xF3a h\u1ECDc: "+q(e.studentData.classInfo.course),1),o("div",null,"Level: "+q(e.studentData.classInfo.level),1),o("div",null,"L\u1ECBch h\u1ECDc: "+q(e.formatSchedule(e.studentData.classInfo)),1)])])]),s(Q,{"answered-questions":e.quizResult,"total-questions":e.numTotalQuestion,"current-question":e.currentQuestion,"can-submit":e.numAnsweredQuestion===e.numTotalQuestion,"student-name":e.studentData.studentInfo.name,onSubmitQuiz:e.handleSubmitQuiz,onQuestionSelected:e.scrollToQuestion},null,8,["answered-questions","total-questions","current-question","can-submit","student-name","onSubmitQuiz","onQuestionSelected"]),o("div",ze,[s(v,{"student-name":e.studentData.studentInfo.name,"time-limit":45,"can-submit":!0,totalQuestionNum:e.numTotalQuestion,"answered-question-num":e.numAnsweredQuestion,onSubmitQuiz:e.handleSubmitQuiz},null,8,["student-name","totalQuestionNum","answered-question-num","onSubmitQuiz"])]),o("div",Ie,[(T(!0),I(j,null,X(e.formattedQuestions,r=>(T(),I("div",{key:"ques-"+r.questionNum,class:"q-mb-lg"},[s(_,{questionData:r,questionNumber:r.questionNum,onAnswerSelected:e.handleAnswer},null,8,["questionData","questionNumber","onAnswerSelected"]),s(b,{questionData:r,questionNumber:r.questionNum,"onUpdate:question":g.handleQuestionUpdate,onAnswerSelected:e.handleAnswer},null,8,["questionData","questionNumber","onUpdate:question","onAnswerSelected"])]))),128))])])])):k("",!0),e.quizStore.isTestStart&&e.quizStore.isTestEnd?(T(),M(m,{key:2})):k("",!0),s(p)],512)}var el=D(fe,[["render",Ce],["__scopeId","data-v-17cb119c"]]);export{el as default};
